# Microservices Ticketing APP

### App is Under construction.

### Installation and running

Deployment mechanism presented by docker containers orchestrating by Kubernetes. Dev environment configured for Skaffold. To get run App on your local machine in dev mode:

Clone the repo repo

```bash
git clone git@github.com:AnimalInstinct/microservices-ticketing.git
```

#### Signing key

Signing key generated by Kubernetes Secret mechanism and pushed to pods as an env variable providing built in tamper-resistant way to expire or invalidate JWT adding signing key to the JWT generated.

As far signing key generated and stored to env variable manually using this command:

```bash
kubectl create secret generic jwtsecret --from-literal=JWT_KEY=YOUR_SECRET_KEY
```

replace YOUR_SECRET_KEY with your secured 256bit generated private key, [can use this service](https://www.allkeysgenerator.com/Random/Security-Encryption-Key-Generator.aspx)

Run Skaffold from the project directory

```bash
cd microservices-ticketing
```

```bash
skaffold dev
```

## Key features:

### Authentication microservice

Centralised JWT based authentication microservice for all the microservices spreaded among the system. All the related user information according his status stored in JWT as payload and encrypted in JWT Creation Algorithm so all other services has a logic that decrypt JWT provided, get details about user and decide if user is authenticated and if user has enough rights to use functions provided by the service.

JWT stored in cookies to resolve server side rendering issue when the first request getting HTML rendered by server should get JWT auth token and store it before JS will be requested.

Do not require any kind of data from a server.

Easily understood between microservices based on different languages.

This implementation has minuses and pluses

- Auth service independent from other services that great for the Microservices architecture

- Not a real-time approach, granted JWT will pass authentication even if Administrator will change related to User status settings. As services haven't communicating with Auth service in real time, the will not get information in real time.

## Unit tests for each or service component, middleware and function

JEST using for tests running, to start testing just input this command in your terminal from any service folder

```bash
npm run tests
```

## Server Side Rendering ReactJS + NextJS frontend microservice

Next JS server side rendered React JS frontend application allows to get maximum from SEO optimization and gives simple rendered HTML code to the search system robots, that decrease time to index new pages and increase SEO optimization. Decrease page loading time and makes user experience better. App consume less traffic and do not consumes user's device resourses.

## CQRS Event Sourcing

### Deployment
